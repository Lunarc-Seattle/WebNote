# fat arrow function
# å›è°ƒå‡½æ•° callback 


**å›è°ƒå‡½æ•°ï¼ˆCallback functionï¼‰** æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒä½œä¸ºå‚æ•°ä¼ é€’ç»™å¦ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶ä¸”åœ¨æŸä¸ªç‰¹å®šæ¡ä»¶ä¸‹è¢«è°ƒç”¨ã€‚ç®€å•æ¥è¯´ï¼Œå›è°ƒå‡½æ•°æ˜¯åœ¨â€œæŸä¸ªäº‹ä»¶å‘ç”Ÿâ€åï¼Œå¦ä¸€ä¸ªå‡½æ•°è‡ªåŠ¨è°ƒç”¨çš„å‡½æ•°ã€‚



## 1. **ä»€ä¹ˆæ˜¯å›è°ƒå‡½æ•°ï¼Ÿ**
å›è°ƒå‡½æ•°æ˜¯ä¸€ç§ç¼–ç¨‹æ¨¡å¼ï¼Œå®ƒå…è®¸æˆ‘ä»¬æŠŠå‡½æ•°ä¼ é€’ç»™å…¶ä»–å‡½æ•°ï¼Œé€šå¸¸æ˜¯ä¸ºäº†åœ¨æŸäº›æ¡ä»¶æˆ–äº‹ä»¶å‘ç”Ÿæ—¶æ‰§è¡Œå®ƒã€‚

**å›è°ƒå‡½æ•°çš„å…³é”®ç‰¹ç‚¹ï¼š**
- **ä½œä¸ºå‚æ•°ä¼ é€’**ï¼šå›è°ƒå‡½æ•°ä¸æ˜¯ç›´æ¥æ‰§è¡Œçš„ï¼Œè€Œæ˜¯ä½œä¸ºå‚æ•°ä¼ é€’ç»™å…¶ä»–å‡½æ•°ã€‚
- **åœ¨ç‰¹å®šæ—¶åˆ»è¢«è°ƒç”¨**ï¼šå½“æ¡ä»¶æ»¡è¶³æˆ–äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œä¼ é€’è¿›å»çš„å›è°ƒå‡½æ•°ä¼šè¢«æ‰§è¡Œã€‚

#### 2. **ä¾‹å­ï¼šæ™®é€šå›è°ƒå‡½æ•°**
å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªå‡½æ•° `doSomething`ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªå›è°ƒå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œå¹¶ä¸”åœ¨æ‰§è¡Œå®Œæˆæ—¶è°ƒç”¨è¿™ä¸ªå›è°ƒå‡½æ•°ï¼š

```javascript
function doSomething(callback) {
  console.log("Doing something...");
  callback();  // æ‰§è¡Œå›è°ƒå‡½æ•°
}

function sayHello() {
  console.log("Hello, world!");
}

doSomething(sayHello);  // æ‰§è¡Œ doSomethingï¼Œé‡Œé¢ä¼šè°ƒç”¨å›è°ƒå‡½æ•° sayHello
```

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼š
- `doSomething` æ˜¯ä¸€ä¸ªæ¥å—å›è°ƒå‡½æ•° `callback` çš„å‡½æ•°ã€‚
- `sayHello` æ˜¯å›è°ƒå‡½æ•°ï¼Œå®ƒä¼šåœ¨ `doSomething` æ‰§è¡Œæ—¶è¢«è°ƒç”¨ã€‚

å½“æˆ‘ä»¬è°ƒç”¨ `doSomething(sayHello)` æ—¶ï¼Œé¦–å…ˆä¼šæ‰“å° `"Doing something..."`ï¼Œç„¶å `doSomething` è°ƒç”¨ `callback()`ï¼Œè¿™æ—¶æ‰§è¡Œ `sayHello()`ï¼Œæ‰€ä»¥æ§åˆ¶å°è¾“å‡º `"Hello, world!"`ã€‚

## 3. **åœ¨ Express ä¸­çš„å›è°ƒå‡½æ•°**
åœ¨ Express æ¡†æ¶ä¸­ï¼Œè·¯ç”±å¤„ç†å‡½æ•°æœ¬è´¨ä¸Šä¹Ÿæ˜¯å›è°ƒå‡½æ•°ã€‚å®ƒä»¬æ˜¯ä½œä¸ºå‚æ•°ä¼ é€’ç»™è·¯ç”±æ–¹æ³•ï¼ˆå¦‚ `app.get()`ï¼‰çš„ï¼Œå¹¶ä¸”ä¼šåœ¨ç”¨æˆ·è¯·æ±‚æ—¶è¢«æ‰§è¡Œã€‚

ä¾‹å¦‚ï¼š

```javascript
app.get('/lookup', (req, res) => {
  console.log(req.query);  // æ‰“å°æŸ¥è¯¢å‚æ•°
  res.send('received');    // å‘é€å“åº”ç»™å®¢æˆ·ç«¯
});
```

- `app.get('/lookup', ...)`ï¼šè¿™æ˜¯ä¸€ä¸ªè·¯ç”±è®¾ç½®ï¼Œå½“æµè§ˆå™¨å‘æœåŠ¡å™¨å‘é€è¯·æ±‚æ—¶ï¼Œå®ƒä¼šæ ¹æ®è¯·æ±‚çš„ URL (`/lookup`) è°ƒç”¨å›è°ƒå‡½æ•°ã€‚
- `(req, res) => { ... }`ï¼šè¿™æ˜¯ä¼ å…¥ `app.get()` çš„å›è°ƒå‡½æ•°ã€‚**å›è°ƒå‡½æ•°æ˜¯å½“è¯·æ±‚åŒ¹é…åˆ° `/lookup` è·¯å¾„æ—¶è‡ªåŠ¨è¢«è°ƒç”¨çš„ã€‚**

### **â€œreqçš„æ—¶å€™è¢«è°ƒç”¨â€æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ**
å½“æµè§ˆå™¨å‘é€ä¸€ä¸ªè¯·æ±‚åˆ°æœåŠ¡å™¨æ—¶ï¼ˆæ¯”å¦‚ `GET /lookup`ï¼‰ï¼Œ**Express ä¼šè‡ªåŠ¨è°ƒç”¨ä¼ é€’ç»™ `app.get()` çš„å›è°ƒå‡½æ•°**ã€‚å›è°ƒå‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œä¼šæ¥æ”¶åˆ°ä¸¤ä¸ªå‚æ•°ï¼š

1. `req`ï¼ˆè¯·æ±‚å¯¹è±¡ï¼‰ï¼šåŒ…å«äº†å®¢æˆ·ç«¯å‘æ¥çš„æ‰€æœ‰è¯·æ±‚æ•°æ®ï¼ˆå¦‚è¯·æ±‚è·¯å¾„ã€æŸ¥è¯¢å‚æ•°ã€è¯·æ±‚ä½“ç­‰ï¼‰ã€‚
2. `res`ï¼ˆå“åº”å¯¹è±¡ï¼‰ï¼šç”¨äºæ„é€ å’Œå‘é€å“åº”å†…å®¹å›å®¢æˆ·ç«¯ã€‚

å½“è¯·æ±‚ `/lookup` è¢«å‘é€æ—¶ï¼Œå›è°ƒå‡½æ•° `(req, res) => { ... }` ä¼šè‡ªåŠ¨æ‰§è¡Œï¼Œå…¶ä¸­ï¼š
- `req` å¯ä»¥è·å–åˆ°æŸ¥è¯¢å‚æ•°ï¼ˆä¾‹å¦‚ï¼š`req.query`ï¼‰ã€‚
- `res` ç”¨äºå‘é€å“åº”ã€‚

æ‰€ä»¥ï¼Œå›è°ƒå‡½æ•°å°±æ˜¯åœ¨å®¢æˆ·ç«¯è¯·æ±‚åˆ°è¾¾æ—¶ï¼Œç”± Express è‡ªåŠ¨è°ƒç”¨çš„å‡½æ•°ã€‚

## æ€»ç»“ï¼š
- **å›è°ƒå‡½æ•°**ï¼šä¼ é€’ç»™å…¶ä»–å‡½æ•°çš„å‡½æ•°ï¼Œå¹¶ä¸”åœ¨æŸä¸ªç‰¹å®šäº‹ä»¶æˆ–æ¡ä»¶ä¸‹è¢«è°ƒç”¨ã€‚
- åœ¨ **Express** ä¸­ï¼Œå›è°ƒå‡½æ•°æ˜¯å¤„ç† HTTP è¯·æ±‚çš„å‡½æ•°ï¼Œå®ƒä¼šåœ¨å®¢æˆ·ç«¯è¯·æ±‚åˆ°è¾¾æ—¶ç”± Express è‡ªåŠ¨è°ƒç”¨ã€‚
- **reqçš„æ—¶å€™è¢«è°ƒç”¨**ï¼šæ„å‘³ç€å½“ç”¨æˆ·å‘èµ·è¯·æ±‚æ—¶ï¼ŒExpress ä¼šè°ƒç”¨ä½ ä¼ é€’çš„å›è°ƒå‡½æ•°æ¥å¤„ç†è¯¥è¯·æ±‚ã€‚

æ˜¯çš„ï¼Œå›è°ƒå‡½æ•°ï¼ˆ**callback**ï¼‰ç¡®å®æ˜¯ä½œä¸ºå‚æ•°ä¼ é€’ç»™å¦ä¸€ä¸ªå‡½æ•°çš„ã€‚å®ƒä¹‹æ‰€ä»¥èƒ½å¤Ÿä½œä¸ºæ–¹æ³• `callback()` è¢«è°ƒç”¨ï¼Œæ˜¯å› ä¸ºå®ƒæœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä½ å¯ä»¥åƒè°ƒç”¨ä»»ä½•å…¶ä»–å‡½æ•°ä¸€æ ·ï¼Œä½¿ç”¨ `()` æ¥è°ƒç”¨å®ƒã€‚

### 1. **å›è°ƒå‡½æ•°ä½œä¸ºå‚æ•°**
å›è°ƒå‡½æ•°çš„æœ¬è´¨æ˜¯ï¼šå°†ä¸€ä¸ªå‡½æ•°ä¼ é€’ç»™å¦ä¸€ä¸ªå‡½æ•°ï¼Œä½œä¸ºè¯¥å‡½æ•°çš„ä¸€éƒ¨åˆ†æ¥ä½¿ç”¨ã€‚è¿™é€šå¸¸å‘ç”Ÿåœ¨ä½ å¸Œæœ›æŸä¸ªå‡½æ•°åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œèƒ½å¤Ÿåœ¨ç‰¹å®šæ—¶åˆ»è°ƒç”¨ä½ ä¼ é€’çš„å‡½æ•°æ—¶ã€‚

å½“æˆ‘ä»¬æŠŠä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’æ—¶ï¼Œå®é™…ä¸Šæ˜¯æŠŠè¿™ä¸ªå‡½æ•°çš„**å¼•ç”¨**ä¼ é€’ç»™äº†ç›®æ ‡å‡½æ•°ã€‚ç›®æ ‡å‡½æ•°ï¼ˆä¾‹å¦‚ `doSomething`ï¼‰å¯ä»¥åœ¨é€‚å½“çš„æ—¶æœºè°ƒç”¨è¿™ä¸ªå›è°ƒå‡½æ•°ã€‚

#### ç¤ºä¾‹ï¼š
```javascript
function greet(name, callback) {
  console.log("Hello, " + name);
  callback();  // è°ƒç”¨å›è°ƒå‡½æ•°
}

function sayGoodbye() {
  console.log("Goodbye!");
}

greet("Alice", sayGoodbye);  // å…ˆæ‰“å° "Hello, Alice"ï¼Œç„¶åè°ƒç”¨å›è°ƒå‡½æ•° sayGoodbye()
```

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼š
- `greet` å‡½æ•°æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯ `name`ï¼ˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼‰ï¼Œç¬¬äºŒä¸ªæ˜¯ `callback`ï¼ˆä¸€ä¸ªå‡½æ•°ï¼‰ã€‚
- åœ¨ `greet` å‡½æ•°å†…éƒ¨ï¼Œå®ƒè°ƒç”¨ `callback()`ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ä¼ é€’ç»™å®ƒçš„ `sayGoodbye` å‡½æ•°ã€‚
- **`callback()` å°±æ˜¯å›è°ƒå‡½æ•°çš„è°ƒç”¨**ï¼Œå®ƒè¢«ä½œä¸ºæ–¹æ³•è°ƒç”¨ã€‚

### 2. **ä¸ºä»€ä¹ˆå›è°ƒå‡½æ•°å¯ä»¥ä½œä¸ºæ–¹æ³•è°ƒç”¨ï¼Ÿ**
å›è°ƒå‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’æ—¶ï¼Œå®é™…ä¸Šæ˜¯ä¼ é€’äº†å‡½æ•°çš„**å¼•ç”¨**ã€‚ä½ å¯ä»¥åƒè°ƒç”¨ä»»ä½•å…¶ä»–å‡½æ•°ä¸€æ ·ï¼Œä½¿ç”¨ `()` æ¥æ‰§è¡Œå®ƒã€‚

å½“ä½ åœ¨å‡½æ•°ä¸­å†™ `callback()`ï¼Œä½ å®é™…ä¸Šæ˜¯åœ¨è°ƒç”¨ä½ ä¼ é€’ç»™å½“å‰å‡½æ•°çš„é‚£ä¸ªå‡½æ•°ã€‚

#### å…·ä½“ä¾‹å­ï¼š
```javascript
function doSomething(callback) {
  console.log("Doing something...");
  callback();  // è¿™é‡Œæ‰§è¡Œçš„æ˜¯ä¼ é€’ç»™ doSomething çš„å›è°ƒå‡½æ•°
}

function sayHello() {
  console.log("Hello!");
}

doSomething(sayHello);  // ä¼šè¾“å‡º "Doing something..." ç„¶åæ‰§è¡Œ sayHello()
```

- `doSomething` å‡½æ•°æ¥æ”¶ä¸€ä¸ªå‡½æ•°ï¼ˆ`sayHello`ï¼‰ä½œä¸ºå‚æ•°ï¼Œç§°ä¹‹ä¸ºå›è°ƒå‡½æ•°ã€‚
- åœ¨ `doSomething` å‡½æ•°å†…ï¼Œæ‰§è¡Œ `callback()`ï¼Œå®ƒå®é™…ä¸Šå°±æ˜¯è°ƒç”¨ `sayHello()`ã€‚

### 3. **ä¸ºä»€ä¹ˆå›è°ƒå‡½æ•°å¯ä»¥åƒæ–¹æ³•ä¸€æ ·ä½¿ç”¨ `callback()`ï¼Ÿ**
åœ¨ JavaScript ä¸­ï¼Œ**å‡½æ•°æœ¬èº«å°±æ˜¯å¯¹è±¡**ã€‚ä½ å¯ä»¥æŠŠä¸€ä¸ªå‡½æ•°å½“ä½œå€¼ä¸€æ ·ä¼ é€’ç»™å…¶ä»–å‡½æ•°ã€‚å½“ä½ æŠŠä¸€ä¸ªå‡½æ•°ä¼ é€’ç»™å¦ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œå®é™…ä¸Šæ˜¯æŠŠè¿™ä¸ªå‡½æ•°çš„â€œå¼•ç”¨â€ä¼ é€’è¿‡å»ï¼Œè€Œä¸æ˜¯å‡½æ•°çš„è¿”å›å€¼ã€‚

å› æ­¤ï¼Œå½“ä½ åœ¨ `doSomething` å‡½æ•°ä¸­å†™ `callback()`ï¼Œä½ å°±æ˜¯åœ¨è°ƒç”¨ä¼ é€’è¿›æ¥çš„é‚£ä¸ªå‡½æ•°ï¼Œå°±åƒè°ƒç”¨ä»»ä½•å…¶ä»–å‡½æ•°ä¸€æ ·ã€‚

### æ€»ç»“ï¼š
- **å›è°ƒå‡½æ•°ä½œä¸ºå…¥å‚**ï¼šå›è°ƒå‡½æ•°æ˜¯ä½œä¸ºå¦ä¸€ä¸ªå‡½æ•°çš„å‚æ•°ä¼ é€’çš„ã€‚å½“ä½ ä¼ é€’ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°æ—¶ï¼Œå®é™…ä¸Šæ˜¯ä¼ é€’äº†è¿™ä¸ªå‡½æ•°çš„å¼•ç”¨ã€‚
- **å›è°ƒå‡½æ•°å¯ä»¥ä½œä¸ºæ–¹æ³•è°ƒç”¨**ï¼šå½“ä½ åœ¨å‡½æ•°å†…éƒ¨è°ƒç”¨ `callback()`ï¼Œä½ å®é™…ä¸Šæ˜¯åœ¨æ‰§è¡Œä½ ä¼ é€’çš„é‚£ä¸ªå‡½æ•°ã€‚ä½ å¯ä»¥åƒè°ƒç”¨å…¶ä»–æ™®é€šå‡½æ•°ä¸€æ ·ï¼Œè°ƒç”¨ä¼ å…¥çš„å›è°ƒå‡½æ•°ã€‚


#  è§£æ„ï¼ˆDestructuringï¼‰

## ğŸ“Œ ä»€ä¹ˆæ˜¯è§£æ„ï¼Ÿ

**è§£æ„**æ˜¯ JavaScript çš„è¯­æ³•ç³–ï¼Œç”¨äºä»å¯¹è±¡æˆ–æ•°ç»„ä¸­**å¿«é€Ÿæå–å€¼**ï¼Œèµ‹å€¼ç»™å˜é‡ã€‚

---

## ğŸ§± å¯¹è±¡è§£æ„

### âœ… æ ‡å‡†å†™æ³•ï¼š

```js
const person = {
  name: 'Fia',
  age: 20,
  city: 'Shanghai'
};

const { name, age } = person;

console.log(name); // "Fia"
console.log(age);  // 20
```

### â— ç­‰ä»·äºï¼š

```js
const name = person.name;
const age = person.age;
```

---

## ğŸ± ç¤ºä¾‹ä»£ç è§£æ

```js
const catStatus = { 
  Jorts: 'in trash bin',
  Jean: 'opening closet',
  Nyan: 'flying high',
};

app.get('/lookup', (req, res) => { 
  const { cat } = req.query; // è§£æ„ï¼šä» req.query ä¸­æå– cat
  const activity = catStatus[cat] || 'cat not found';
  res.send(activity);
});
```

### ğŸŒ ç¤ºä¾‹è¯·æ±‚ï¼š

```
GET /lookup?cat=Nyan
```

å¯¹åº” `req.query`ï¼š

```js
{ cat: "Nyan" }
```

è§£æ„åï¼š

```js
const cat = "Nyan"
```

---

## âœ… è§£æ„çš„è¯­æ³•å¥½å¤„

- ç®€æ´ï¼šä¸€è¡Œä»£ç å–å‡ºå¤šä¸ªå˜é‡
- æ¸…æ™°ï¼šæ˜ç¡®çŸ¥é“ä»å“ªé‡Œæå–ä»€ä¹ˆå­—æ®µ
- å¸¸ç”¨äºï¼š`req.query`, `req.body`, JSON å“åº”å¯¹è±¡ç­‰

---

## ğŸ“¦ é™„åŠ ï¼šæ•°ç»„è§£æ„

```js
const [a, b] = [1, 2];
console.log(a); // 1
console.log(b); // 2
```

---

## ğŸ§  å°ç»“è¡¨æ ¼

| å†™æ³•                         | å«ä¹‰è¯´æ˜                   |
|------------------------------|----------------------------|
| `const { cat } = req.query`  | ä»å¯¹è±¡ä¸­è§£æ„å‡º `cat` å­—æ®µ   |
| `const cat = req.query.cat`  | æ™®é€šå†™æ³•ï¼Œç­‰ä»·æ•ˆæœ         |
| `const [a, b] = [1, 2]`       | ä»æ•°ç»„ä¸­è§£æ„å‡ºç¬¬ 1ã€2 é¡¹å€¼  |
